import os

import pandas

from blstmmodel import BLSTM


def model(filename,vector_length):
    base = os.path.splitext(os.path.basename(filename))[0]
    vector_filename = base + "_gadget_vectors.pkl"
    path = os.path.join("../data",vector_filename)
    if os.path.exists(path):
        df = pandas.read_pickle(path)
        blstm = BLSTM(df, name=base)
        blstm.train()
        return blstm.test()



def main():
    vector_length = 100
    model("code.txt", vector_length)
    model("compile_code.txt", vector_length)


if __name__ == "__main__":
    main()